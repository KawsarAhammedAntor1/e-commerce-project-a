<!DOCTYPE html>
<html lang="en">

<head>
    <script src="js/config.js"></script>
    <script src="js/site-loader.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - E-commerce</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/cart.css">
</head>

<body>
    <div id="toast-container"></div>
    <div class="overlay" id="overlay"></div>
    <nav class="side-nav" id="side-nav">
        <div class="side-nav-header">
            <h2 class="side-nav-logo" id="mobile-site-name">Girl's Fashion</h2>
            <button class="close-btn" id="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <ul class="side-nav-list">
            <li>
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="profile.html">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </li>
            <li>
                <a href="product.html">
                    <i class="fas fa-box"></i>
                    <span>Product</span>
                </a>
            </li>
            <li>
                <a href="about.html">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="contact.html">
                    <i class="fas fa-envelope"></i>
                    <span>Contact Us</span>
                </a>
            </li>
            <li>
                <a href="login.html">
                    <i class="fas fa-user"></i>
                    <span>Login / Sign Up</span>
                </a>
            </li>
            <li>
                <a href="admin_login.html" id="side-nav-admin-link">
                    <i class="fas fa-user-shield"></i>
                    <span>Admin</span>
                </a>
            </li>
        </ul>
    </nav>
    <header class="header"></header>
    <div id="search-overlay" style="display:none;"></div>
    <div class="main-content">
        <div id="main-page-content">
            <h1 class="section-title">Your Shopping Cart</h1>

            <div id="cart-content">
                <div id="empty-cart-message" style="display: none; text-align: center; padding: 40px;">
                    <i class="fas fa-shopping-cart" style="font-size: 3rem; color: #ccc;"></i>
                    <h2>Your cart is empty</h2>
                    <p>Looks like you haven't added anything to your cart yet.</p>

                    <a href="product.html" id="btn-start-shopping" class="confirm-order-btn"
                        style="display: none; width: auto; padding: 10px 20px; margin-top: 20px;">Start Shopping</a>

                    <a href="login.html" id="btn-signup-shopping" class="confirm-order-btn"
                        style="display: none; width: auto; padding: 10px 20px; margin-top: 20px;">Sign Up to Start
                        Shopping</a>
                </div>

                <div id="cart-items-container" style="display: none;">
                </div>

                <div id="cart-summary" class="checkout-summary" style="display: none;">
                    <h3>Order Summary</h3>
                    <div class="summary-item">
                        <span>Subtotal:</span>
                        <span id="subtotal-display">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span>Delivery Charge:</span>
                        <span id="delivery-charge-display">$0.00</span>
                    </div>
                    <div class="summary-item total">
                        <span>Grand Total:</span>
                        <span id="grand-total-display">$0.00</span>
                    </div>
                    <button id="proceed-to-checkout-btn" class="confirm-order-btn">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bottom-nav"></footer>

    <script src="js/global.js"></script>
    <script src="js/cart.js"></script>
    <script>
        // Dynamically load header and footer
        document.addEventListener('DOMContentLoaded', () => {
            fetch('header.html')
                .then(response => {
                    if (response.ok) return response.text();
                    return Promise.reject('header.html not found');
                })
                .then(data => {
                    document.querySelector('.header').innerHTML = data;
                    if (window.restoreSession) window.restoreSession();
                    if (window.updateCartCount) window.updateCartCount();
                    if (window.setupHeaderListeners) window.setupHeaderListeners(); // Apply listeners
                })
                .catch(error => {
                    console.warn(error + '. Using fallback header.');
                    document.querySelector('.header').innerHTML = `
                        <div class="header-top">
                            <div class="header-left">
                                <i class="fas fa-bars" id="menu-btn"></i>
                                <h1 class="header-logo">Girl's Fashion</h1>
                            </div>
                            
                            <!-- Desktop Navigation -->
                            <nav class="desktop-nav">
                                <a href="index.html">Home</a>
                                <a href="profile.html">Profile</a>
                                <a href="product.html">Product</a>
                                <a href="about.html">About</a>
                                <a href="contact.html">Contact Us</a>
                                <a href="login.html">Login</a>
                                <a href="admin_login.html">Admin</a>
                            </nav>

                            <div class="header-right">
                                <button id="dark-mode-toggle"><i class="fas fa-moon"></i><i class="fas fa-sun"></i></button>
                                <a href="cart.html" class="cart-icon">
                                    <i class="fas fa-shopping-cart"></i>
                                    <span class="cart-badge">0</span>
                                </a>
                            </div>
                        </div>
                        <div class="header-search">
                            <input type="text" placeholder="Search Product...">
                            <button class="search-btn">Search</button>
                        </div>
                    `;
                    if (window.setupHeaderListeners) window.setupHeaderListeners(); // Apply listeners for fallback
                });

            fetch('footer.html')
                .then(response => {
                    if (response.ok) return response.text();
                    return Promise.reject('footer.html not found');
                })
                .then(data => {
                    document.querySelector('.bottom-nav').innerHTML = data;
                })
                .catch(error => {
                    console.warn(error + '. Using fallback footer.');
                });
        });
    </script>
</body>

</html>